image: maven:3-jdk-11

stages:
  - compile
  - test
  - deploy-heroku

compile-job:
  stage: compile
  script:
    - mvn install -B
    - mvn compile

test-job:
  stage: test
  script:
    - mvn test

heroku-deploy:
  stage: deploy-heroku
  script:
   - apt-get update -yq
   - apt-get install -y ruby-dev       
   - gem install dpl
   - dpl --provider=heroku --app=drp-inaglobe-platform --api-key=2f23823e-beb1-4f1c-84ba-b4ca43eef210
